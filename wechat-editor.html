<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾®ä¿¡å…¬ä¼—å·æ’ç‰ˆå·¥å…· - é£é‡AIåˆ›ä½œ</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, 
                #ff9a56 0%, 
                #ff6b6b 25%, 
                #4ecdc4 50%, 
                #45b7d1 75%, 
                #96ceb4 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: #333;
            position: relative;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* äº‘æœµæ•ˆæœ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse 200px 100px at 20% 30%, rgba(255,255,255,0.3) 0%, transparent 50%),
                radial-gradient(ellipse 300px 150px at 80% 20%, rgba(255,255,255,0.2) 0%, transparent 50%),
                radial-gradient(ellipse 250px 120px at 60% 70%, rgba(255,255,255,0.25) 0%, transparent 50%),
                radial-gradient(ellipse 180px 90px at 30% 80%, rgba(255,255,255,0.2) 0%, transparent 50%),
                radial-gradient(ellipse 220px 110px at 90% 60%, rgba(255,255,255,0.15) 0%, transparent 50%);
            pointer-events: none;
            z-index: 1;
            animation: cloudFloat 20s ease-in-out infinite;
        }

        @keyframes cloudFloat {
            0%, 100% { transform: translateX(0px) translateY(0px); }
            25% { transform: translateX(10px) translateY(-5px); }
            50% { transform: translateX(-5px) translateY(5px); }
            75% { transform: translateX(8px) translateY(-3px); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            height: 100vh;
            position: relative;
            z-index: 2;
        }

        .editor-panel, .preview-panel {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-header {
            padding: 15px 20px;
            background: rgba(248, 249, 250, 0.3);
            backdrop-filter: blur(3px);
            border-bottom: 1px solid rgba(238, 238, 238, 0.3);
            font-weight: 600;
            color: #666;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8);
            position: relative;
        }

        .help-btn {
            position: absolute;
            top: 12px;
            right: 20px;
            background: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            color: #666;
        }

        .help-btn:hover {
            background: #e0e0e0;
        }

        .help-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .help-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 8px;
            padding: 20px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .help-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #999;
        }

        .close-btn:hover {
            color: #333;
        }

        .help-section {
            margin-bottom: 20px;
        }

        .help-section h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .help-section ul {
            list-style: none;
            padding: 0;
        }

        .help-section li {
            margin: 8px 0;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 13px;
        }

        .help-section .example {
            color: #666;
            font-size: 12px;
            margin-left: 10px;
        }

        /* å†å²è®°å½•ä¾§è¾¹æ  */
        .history-trigger {
            position: fixed;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 100px;
            background: rgba(7,193,96,0.1);
            border-radius: 0 10px 10px 0;
            cursor: pointer;
            z-index: 998;
            transition: all 0.3s ease;
        }

        .history-trigger:hover {
            background: rgba(7,193,96,0.3);
            width: 30px;
        }

        .history-sidebar {
            position: fixed;
            left: -300px;
            top: 0;
            width: 300px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(12px);
            border-right: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 2px 0 20px rgba(0,0,0,0.05);
            z-index: 999;
            transition: left 0.3s ease;
            overflow-y: auto;
        }

        .history-sidebar.show {
            left: 0;
        }

        .history-header {
            padding: 20px;
            border-bottom: 1px solid rgba(238, 238, 238, 0.3);
            background: rgba(248, 249, 250, 0.2);
            backdrop-filter: blur(3px);
        }

        .history-header h3 {
            text-shadow: 0 1px 2px rgba(255,255,255,0.8);
        }

        .history-header h3 {
            margin: 0 0 15px 0;
            color: #333;
            font-size: 16px;
        }

        .new-article-btn {
            width: 100%;
            padding: 8px 16px;
            background: #07c160;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .new-article-btn:hover {
            background: #06ad56;
        }

        .history-list {
            padding: 0;
        }

        .history-item {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(240, 240, 240, 0.3);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .history-title {
            text-shadow: 0 1px 2px rgba(255,255,255,0.8);
        }

        .history-item:hover {
            background: #f8f9fa;
        }

        .history-item.active {
            background: #e8f5e8;
            border-left: 3px solid #07c160;
        }

        .history-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .history-time {
            font-size: 12px;
            color: #999;
        }

        .history-preview {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .delete-btn {
            float: right;
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 12px;
            padding: 2px 5px;
        }

        .delete-btn:hover {
            color: #e74c3c;
        }

        .save-controls {
            padding: 10px 20px;
            border-bottom: 1px solid rgba(238, 238, 238, 0.3);
            background: rgba(248, 249, 250, 0.2);
            backdrop-filter: blur(3px);
            display: flex;
            gap: 10px;
        }

        .save-btn {
            flex: 1;
            padding: 6px 12px;
            background: #17a2b8;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .save-btn:hover {
            background: #138496;
        }

        .article-title-input {
            width: 100%;
            padding: 6px 10px;
            border: 1px solid rgba(221, 221, 221, 0.5);
            border-radius: 4px;
            font-size: 12px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(3px);
            color: #333;
        }

        .editor {
            flex: 1;
            border: none;
            outline: none;
            padding: 20px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            background: rgba(255, 255, 255, 0.1);
            color: #333;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8);
        }

        .preview {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.1);
            color: #333;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8);
        }

        .copy-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            background: #07c160;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .copy-btn:hover {
            background: #06ad56;
        }

        /* å¾®ä¿¡å…¬ä¼—å·æ ·å¼ */
        .wechat-content {
            max-width: 100%;
            margin: 0 auto;
            color: #333;
            line-height: 1.8;
        }

        .wechat-content h1 {
            font-size: 22px;
            font-weight: bold;
            color: #333;
            margin: 20px 0 15px 0;
            text-align: center;
            border-bottom: 2px solid #07c160;
            padding-bottom: 10px;
        }

        .wechat-content h2 {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin: 25px 0 15px 0;
            padding-left: 10px;
            border-left: 4px solid #07c160;
            background: linear-gradient(90deg, rgba(7,193,96,0.1) 0%, transparent 100%);
            padding: 8px 0 8px 15px;
        }

        .wechat-content h3 {
            font-size: 16px;
            font-weight: bold;
            color: #555;
            margin: 20px 0 10px 0;
        }

        .wechat-content p {
            font-size: 15px;
            line-height: 1.8;
            margin: 12px 0;
            text-align: justify;
            color: #333;
        }

        .wechat-content blockquote {
            background: #f8f9fa;
            border-left: 4px solid #ddd;
            margin: 15px 0;
            padding: 15px 20px;
            font-style: italic;
            color: #666;
            border-radius: 0 4px 4px 0;
        }

        .wechat-content blockquote p {
            margin: 0;
            font-size: 14px;
        }

        .wechat-content ul, .wechat-content ol {
            margin: 15px 0;
            padding-left: 25px;
        }

        .wechat-content li {
            margin: 8px 0;
            line-height: 1.6;
        }

        .wechat-content code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 13px;
            color: #d73a49;
        }

        .wechat-content pre {
            background: #f6f8fa;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 16px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .wechat-content pre code {
            background: none;
            padding: 0;
            color: #333;
        }

        .wechat-content strong {
            font-weight: bold;
            color: #333;
        }

        .wechat-content em {
            font-style: italic;
            color: #666;
        }

        .wechat-content hr {
            border: none;
            height: 1px;
            background: linear-gradient(90deg, transparent, #ddd, transparent);
            margin: 25px 0;
        }

        .wechat-content img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto;
            border-radius: 4px;
        }

        .wechat-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 14px;
        }

        .wechat-content th, .wechat-content td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }

        .wechat-content th {
            background: #f8f9fa;
            font-weight: bold;
        }

        .highlight {
            background: linear-gradient(180deg, transparent 60%, #fff2cc 60%);
            padding: 0 2px;
        }

        /* æ–‡å­—é¢œè‰²æ ·å¼ */
        .text-red { color: #e74c3c !important; }
        .text-blue { color: #3498db !important; }
        .text-green { color: #27ae60 !important; }
        .text-orange { color: #f39c12 !important; }
        .text-purple { color: #9b59b6 !important; }
        .text-pink { color: #e91e63 !important; }
        .text-gray { color: #7f8c8d !important; }
        .text-brown { color: #8d6e63 !important; }
        .text-teal { color: #1abc9c !important; }
        .text-indigo { color: #6c5ce7 !important; }
        
        /* èƒŒæ™¯é¢œè‰²æ ·å¼ */
        .bg-yellow { background-color: #fff2cc; padding: 2px 4px; border-radius: 2px; }
        .bg-red { background-color: #ffebee; padding: 2px 4px; border-radius: 2px; }
        .bg-blue { background-color: #e3f2fd; padding: 2px 4px; border-radius: 2px; }
        .bg-green { background-color: #e8f5e8; padding: 2px 4px; border-radius: 2px; }
        .bg-purple { background-color: #f3e5f5; padding: 2px 4px; border-radius: 2px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="editor-panel">
            <div class="panel-header">
                Markdown ç¼–è¾‘å™¨
                <button class="help-btn" onclick="showHelp()">ç”¨æ³•è¯´æ˜</button>
            </div>
            <div class="save-controls">
                <input type="text" class="article-title-input" id="articleTitle" placeholder="æ–‡ç« æ ‡é¢˜..." value="æ¸”æ¨µé—®é“">
                <button class="save-btn" onclick="saveArticle()">ä¿å­˜</button>
            </div>
            <textarea class="editor" id="markdown-input" placeholder="åœ¨è¿™é‡Œè¾“å…¥ Markdown å†…å®¹..."># æ¸”æ¨µé—®é“

ä¸€æ—¥ï¼Œä¸€æ¨µå¤«åœ¨å±±é—´ç æŸ´ï¼Œå¶é‡ä¸€æ¸”å¤«åœ¨æ±Ÿè¾¹å‚é’“ã€‚

æ¨µå¤«æ”¾ä¸‹æ–§å¤´ï¼Œèµ°è¿‘é—®é“ï¼š"{blue}å…„å°æ¯æ—¥åœ¨æ­¤å‚é’“ï¼Œå¯æ˜¯ä¸ºäº†è°‹ç”Ÿï¼Ÿ{/blue}"

æ¸”å¤«ç¬‘é“ï¼š"{green}è°‹ç”Ÿäº¦æ˜¯ï¼Œé€é¥äº¦æ˜¯ã€‚{/green}"

æ¨µå¤«ä¸è§£ï¼š"{orange}ä½•è°“é€é¥ï¼Ÿ{/orange}"

æ¸”å¤«æŒ‡ç€è¿œå±±è¿‘æ°´ï¼Œè¯´é“ï¼š

> "ä½ æˆ‘çš†åœ¨è¿™å¤©åœ°ä¹‹é—´ï¼Œä½ ä¸ºæŸ´ç±³æ²¹ç›è€Œè¾›è‹¦ï¼Œæˆ‘äº¦ç„¶ã€‚ä½†ä½ æ¯æ—¥é¢æœé»„åœŸèƒŒæœå¤©ï¼Œæˆ‘å´èƒ½è§‚æ—¥å‡ºæ—¥è½ï¼Œå¬æ½®èµ·æ½®è½ã€‚ä½ ç æŸ´ï¼Œæ˜¯ä¸å±±æ—äº‰ï¼Œæˆ‘å‚é’“ï¼Œæ˜¯ä¸æ±Ÿæ°´åˆã€‚ä½ æ±‚å¤šï¼Œæˆ‘æ±‚ç²¾ã€‚ä½ æ±‚é‡ï¼Œæˆ‘æ±‚è½»ã€‚"

æ¨µå¤«å¬ç½¢ï¼Œæ²‰æ€åŠæ™Œï¼Œåˆé—®ï¼š"{purple}é‚£ä½ å…„å°ä¹‹è§ï¼Œäººç”Ÿå½“å¦‚ä½•ï¼Ÿ{/purple}"

æ¸”å¤«æ”¶èµ·é±¼ç«¿ï¼Œæœ›ç€å¹³é™çš„æ±Ÿé¢ï¼Œç¼“ç¼“è¯´é“ï¼š"{red}äººç”Ÿï¼Œå¦‚è¿™æ±Ÿæ°´ï¼Œæœ‰æ³¢æ¾œæ±¹æ¶Œæ—¶ï¼Œä¹Ÿæœ‰é£å¹³æµªé™æ—¶ã€‚{bg-yellow}æ— éœ€å¼ºæ±‚ï¼Œæ— éœ€æ‰§ç€{/bg-yellow}ï¼Œé¡ºå…¶è‡ªç„¶ï¼Œéšå¿ƒè€Œå®‰ã€‚{/red}"

## é¢œè‰²ä½¿ç”¨è¯´æ˜

**æ–‡å­—é¢œè‰²è¯­æ³•ï¼š**
- {red}çº¢è‰²æ–‡å­—{/red}
- {blue}è“è‰²æ–‡å­—{/blue} 
- {green}ç»¿è‰²æ–‡å­—{/green}
- {orange}æ©™è‰²æ–‡å­—{/orange}
- {purple}ç´«è‰²æ–‡å­—{/purple}
- {pink}ç²‰è‰²æ–‡å­—{/pink}
- {gray}ç°è‰²æ–‡å­—{/gray}
- {brown}æ£•è‰²æ–‡å­—{/brown}
- {teal}é’è‰²æ–‡å­—{/teal}
- {indigo}é›è“æ–‡å­—{/indigo}

**èƒŒæ™¯é¢œè‰²è¯­æ³•ï¼š**
- {bg-yellow}é»„è‰²èƒŒæ™¯{/bg-yellow}
- {bg-red}çº¢è‰²èƒŒæ™¯{/bg-red}
- {bg-blue}è“è‰²èƒŒæ™¯{/bg-blue}
- {bg-green}ç»¿è‰²èƒŒæ™¯{/bg-green}
- {bg-purple}ç´«è‰²èƒŒæ™¯{/bg-purple}

**é«˜äº®è¯­æ³•ï¼š**
- ==é«˜äº®æ–‡å­—==</textarea>
        </div>
        
        <div class="preview-panel">
            <div class="panel-header">
                å¾®ä¿¡å…¬ä¼—å·é¢„è§ˆ
                <button class="copy-btn" onclick="copyToClipboard()">å¤åˆ¶HTML</button>
            </div>
            <div class="preview">
                <div class="wechat-content" id="preview-content"></div>
            </div>
        </div>
    </div>

    <!-- å†å²è®°å½•è§¦å‘åŒºåŸŸ -->
    <div class="history-trigger" onmouseenter="showHistory()" title="æ‚¬æµ®æŸ¥çœ‹å†å²è®°å½•"></div>

    <!-- å†å²è®°å½•ä¾§è¾¹æ  -->
    <div class="history-sidebar" id="historySidebar" onmouseleave="hideHistory()">
        <div class="history-header">
            <h3>ğŸ“š æ–‡ç« å†å²</h3>
            <button class="new-article-btn" onclick="newArticle()">+ æ–°å»ºæ–‡ç« </button>
        </div>
        <div class="history-list" id="historyList">
            <!-- å†å²è®°å½•å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>

    <!-- é¡µé¢åº•éƒ¨æ ‡ç­¾ -->
    <div style="position: fixed; bottom: 10px; right: 20px; background: rgba(255,255,255,0.9); padding: 5px 10px; border-radius: 15px; font-size: 12px; color: #666; box-shadow: 0 2px 8px rgba(0,0,0,0.1); z-index: 999;">
        ğŸŒªï¸ é£ä¹ŸAIåˆ›ä½œ
    </div>

    <!-- ç”¨æ³•è¯´æ˜å¼¹çª— -->
    <div class="help-modal" id="helpModal">
        <div class="help-content">
            <div class="help-header">
                <h2>ğŸ“– å¾®ä¿¡å…¬ä¼—å·æ’ç‰ˆå·¥å…· - ç”¨æ³•è¯´æ˜</h2>
                <p style="font-size: 12px; color: #999; margin: 0;">ğŸŒªï¸ é£ä¹ŸAIåˆ›ä½œ</p>
                <button class="close-btn" onclick="hideHelp()">&times;</button>
            </div>
            
            <div class="help-section">
                <h3>ğŸ¨ æ–‡å­—é¢œè‰²è¯­æ³•</h3>
                <ul>
                    <li>{red}çº¢è‰²æ–‡å­—{/red} <span class="example">â†’ æ˜¾ç¤ºä¸ºçº¢è‰²</span></li>
                    <li>{blue}è“è‰²æ–‡å­—{/blue} <span class="example">â†’ æ˜¾ç¤ºä¸ºè“è‰²</span></li>
                    <li>{green}ç»¿è‰²æ–‡å­—{/green} <span class="example">â†’ æ˜¾ç¤ºä¸ºç»¿è‰²</span></li>
                    <li>{orange}æ©™è‰²æ–‡å­—{/orange} <span class="example">â†’ æ˜¾ç¤ºä¸ºæ©™è‰²</span></li>
                    <li>{purple}ç´«è‰²æ–‡å­—{/purple} <span class="example">â†’ æ˜¾ç¤ºä¸ºç´«è‰²</span></li>
                    <li>{pink}ç²‰è‰²æ–‡å­—{/pink} <span class="example">â†’ æ˜¾ç¤ºä¸ºç²‰è‰²</span></li>
                    <li>{gray}ç°è‰²æ–‡å­—{/gray} <span class="example">â†’ æ˜¾ç¤ºä¸ºç°è‰²</span></li>
                    <li>{brown}æ£•è‰²æ–‡å­—{/brown} <span class="example">â†’ æ˜¾ç¤ºä¸ºæ£•è‰²</span></li>
                    <li>{teal}é’è‰²æ–‡å­—{/teal} <span class="example">â†’ æ˜¾ç¤ºä¸ºé’è‰²</span></li>
                    <li>{indigo}é›è“æ–‡å­—{/indigo} <span class="example">â†’ æ˜¾ç¤ºä¸ºé›è“è‰²</span></li>
                </ul>
            </div>

            <div class="help-section">
                <h3>ğŸ¯ èƒŒæ™¯é¢œè‰²è¯­æ³•</h3>
                <ul>
                    <li>{bg-yellow}é»„è‰²èƒŒæ™¯{/bg-yellow} <span class="example">â†’ é»„è‰²èƒŒæ™¯</span></li>
                    <li>{bg-red}çº¢è‰²èƒŒæ™¯{/bg-red} <span class="example">â†’ çº¢è‰²èƒŒæ™¯</span></li>
                    <li>{bg-blue}è“è‰²èƒŒæ™¯{/bg-blue} <span class="example">â†’ è“è‰²èƒŒæ™¯</span></li>
                    <li>{bg-green}ç»¿è‰²èƒŒæ™¯{/bg-green} <span class="example">â†’ ç»¿è‰²èƒŒæ™¯</span></li>
                    <li>{bg-purple}ç´«è‰²èƒŒæ™¯{/bg-purple} <span class="example">â†’ ç´«è‰²èƒŒæ™¯</span></li>
                </ul>
            </div>

            <div class="help-section">
                <h3>âœ¨ ç‰¹æ®Šæ•ˆæœ</h3>
                <ul>
                    <li>==é«˜äº®æ–‡å­—== <span class="example">â†’ é»„è‰²é«˜äº®æ•ˆæœ</span></li>
                </ul>
            </div>

            <div class="help-section">
                <h3>ğŸ“ æ ‡å‡† Markdown è¯­æ³•</h3>
                <ul>
                    <li># ä¸€çº§æ ‡é¢˜ <span class="example">â†’ å¤§æ ‡é¢˜ï¼Œå±…ä¸­ï¼Œç»¿è‰²ä¸‹åˆ’çº¿</span></li>
                    <li>## äºŒçº§æ ‡é¢˜ <span class="example">â†’ ä¸­æ ‡é¢˜ï¼Œå·¦ä¾§ç»¿è‰²è¾¹æ¡†</span></li>
                    <li>### ä¸‰çº§æ ‡é¢˜ <span class="example">â†’ å°æ ‡é¢˜</span></li>
                    <li>**ç²—ä½“æ–‡å­—** <span class="example">â†’ åŠ ç²—æ˜¾ç¤º</span></li>
                    <li>*æ–œä½“æ–‡å­—* <span class="example">â†’ æ–œä½“æ˜¾ç¤º</span></li>
                    <li>> å¼•ç”¨æ–‡å­— <span class="example">â†’ ç°è‰²èƒŒæ™¯å¼•ç”¨å—</span></li>
                    <li>- æ— åºåˆ—è¡¨é¡¹ <span class="example">â†’ åœ†ç‚¹åˆ—è¡¨</span></li>
                    <li>1. æœ‰åºåˆ—è¡¨é¡¹ <span class="example">â†’ æ•°å­—åˆ—è¡¨</span></li>
                    <li>`ä»£ç ` <span class="example">â†’ è¡Œå†…ä»£ç æ ·å¼</span></li>
                    <li>```ä»£ç å—``` <span class="example">â†’ å¤šè¡Œä»£ç å—</span></li>
                    <li>--- <span class="example">â†’ åˆ†å‰²çº¿</span></li>
                    <li>![å›¾ç‰‡](é“¾æ¥) <span class="example">â†’ æ’å…¥å›¾ç‰‡</span></li>
                    <li>[é“¾æ¥æ–‡å­—](é“¾æ¥åœ°å€) <span class="example">â†’ è¶…é“¾æ¥</span></li>
                </ul>
            </div>

            <div class="help-section">
                <h3>ğŸ”§ ä½¿ç”¨æŠ€å·§</h3>
                <ul>
                    <li>å¯ä»¥ç»„åˆä½¿ç”¨ï¼š{red}**çº¢è‰²ç²—ä½“**{/red}</li>
                    <li>å¯ä»¥åµŒå¥—æ•ˆæœï¼š{blue}è“è‰²{bg-yellow}å¸¦èƒŒæ™¯{/bg-yellow}æ–‡å­—{/blue}</li>
                    <li>ç¼–è¾‘å®Œæˆåç‚¹å‡»"å¤åˆ¶HTML"æŒ‰é’®</li>
                    <li>ç›´æ¥ç²˜è´´åˆ°å¾®ä¿¡å…¬ä¼—å·ç¼–è¾‘å™¨å³å¯</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const markdownInput = document.getElementById('markdown-input');
        const previewContent = document.getElementById('preview-content');

        // é…ç½® marked
        marked.setOptions({
            breaks: true,
            gfm: true
        });

        function updatePreview() {
            const markdown = markdownInput.value;
            let html = marked.parse(markdown);
            
            // æ·»åŠ é«˜äº®æ•ˆæœçš„å¤„ç†
            html = html.replace(/==(.*?)==/g, '<span class="highlight">$1</span>');
            
            // æ·»åŠ æ–‡å­—é¢œè‰²å¤„ç†
            html = html.replace(/\{red\}(.*?)\{\/red\}/g, '<span class="text-red">$1</span>');
            html = html.replace(/\{blue\}(.*?)\{\/blue\}/g, '<span class="text-blue">$1</span>');
            html = html.replace(/\{green\}(.*?)\{\/green\}/g, '<span class="text-green">$1</span>');
            html = html.replace(/\{orange\}(.*?)\{\/orange\}/g, '<span class="text-orange">$1</span>');
            html = html.replace(/\{purple\}(.*?)\{\/purple\}/g, '<span class="text-purple">$1</span>');
            html = html.replace(/\{pink\}(.*?)\{\/pink\}/g, '<span class="text-pink">$1</span>');
            html = html.replace(/\{gray\}(.*?)\{\/gray\}/g, '<span class="text-gray">$1</span>');
            html = html.replace(/\{brown\}(.*?)\{\/brown\}/g, '<span class="text-brown">$1</span>');
            html = html.replace(/\{teal\}(.*?)\{\/teal\}/g, '<span class="text-teal">$1</span>');
            html = html.replace(/\{indigo\}(.*?)\{\/indigo\}/g, '<span class="text-indigo">$1</span>');
            
            // æ·»åŠ èƒŒæ™¯é¢œè‰²å¤„ç†
            html = html.replace(/\{bg-yellow\}(.*?)\{\/bg-yellow\}/g, '<span class="bg-yellow">$1</span>');
            html = html.replace(/\{bg-red\}(.*?)\{\/bg-red\}/g, '<span class="bg-red">$1</span>');
            html = html.replace(/\{bg-blue\}(.*?)\{\/bg-blue\}/g, '<span class="bg-blue">$1</span>');
            html = html.replace(/\{bg-green\}(.*?)\{\/bg-green\}/g, '<span class="bg-green">$1</span>');
            html = html.replace(/\{bg-purple\}(.*?)\{\/bg-purple\}/g, '<span class="bg-purple">$1</span>');
            
            previewContent.innerHTML = html;
            addClickToEditListeners();
        }

        // ä¸ºé¢„è§ˆåŒºåŸŸæ·»åŠ ç‚¹å‡»è·³è½¬åŠŸèƒ½
        function addClickToEditListeners() {
            const previewElements = previewContent.querySelectorAll('h1, h2, h3, h4, h5, h6, p, li, blockquote, pre');
            
            previewElements.forEach((element, index) => {
                element.style.cursor = 'pointer';
                element.style.transition = 'background-color 0.2s ease';
                
                element.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = 'rgba(7, 193, 96, 0.1)';
                });
                
                element.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = 'transparent';
                });
                
                element.addEventListener('click', function() {
                    jumpToMarkdownLine(element);
                });
            });
        }

        // è·³è½¬åˆ°å¯¹åº”çš„Markdownè¡Œ
        function jumpToMarkdownLine(clickedElement) {
            const markdownLines = markdownInput.value.split('\n');
            const elementText = clickedElement.textContent.trim();
            
            // æŸ¥æ‰¾å¯¹åº”çš„è¡Œå·
            let targetLine = -1;
            let bestMatch = { line: -1, score: 0 };
            
            for (let i = 0; i < markdownLines.length; i++) {
                const line = markdownLines[i].trim();
                if (!line) continue; // è·³è¿‡ç©ºè¡Œ
                
                let cleanLine = '';
                let matchScore = 0;
                
                // å¤„ç†æ ‡é¢˜
                if (clickedElement.tagName.match(/^H[1-6]$/)) {
                    cleanLine = line.replace(/^#+\s*/, '').replace(/\{[^}]*\}/g, '').trim();
                    if (cleanLine === elementText) {
                        targetLine = i;
                        break;
                    } else if (cleanLine.includes(elementText) || elementText.includes(cleanLine)) {
                        matchScore = Math.min(cleanLine.length, elementText.length) / Math.max(cleanLine.length, elementText.length);
                    }
                }
                // å¤„ç†æ®µè½å’Œå…¶ä»–å…ƒç´ 
                else {
                    cleanLine = line.replace(/\*\*|\*|`|\{[^}]*\}|>\s*|\d+\.\s*|-\s*/g, '').trim();
                    
                    // ç²¾ç¡®åŒ¹é…
                    if (cleanLine === elementText) {
                        targetLine = i;
                        break;
                    }
                    
                    // è®¡ç®—åŒ¹é…åº¦
                    if (cleanLine.length > 0 && elementText.length > 0) {
                        if (cleanLine.includes(elementText)) {
                            matchScore = elementText.length / cleanLine.length;
                        } else if (elementText.includes(cleanLine)) {
                            matchScore = cleanLine.length / elementText.length;
                        } else {
                            // è®¡ç®—ç›¸ä¼¼åº¦ï¼ˆç®€å•çš„å­—ç¬¦åŒ¹é…ï¼‰
                            const shorter = cleanLine.length < elementText.length ? cleanLine : elementText;
                            const longer = cleanLine.length >= elementText.length ? cleanLine : elementText;
                            let commonChars = 0;
                            for (let j = 0; j < shorter.length; j++) {
                                if (longer.includes(shorter[j])) commonChars++;
                            }
                            matchScore = commonChars / longer.length;
                        }
                    }
                }
                
                // æ›´æ–°æœ€ä½³åŒ¹é…
                if (matchScore > bestMatch.score && matchScore > 0.3) {
                    bestMatch = { line: i, score: matchScore };
                }
            }
            
            // å¦‚æœæ²¡æœ‰ç²¾ç¡®åŒ¹é…ï¼Œä½¿ç”¨æœ€ä½³åŒ¹é…
            if (targetLine === -1 && bestMatch.line !== -1) {
                targetLine = bestMatch.line;
            }
            
            // æœ€åçš„æ¨¡ç³ŠåŒ¹é…
            if (targetLine === -1) {
                const searchText = elementText.substring(0, 15).replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g, ''); // åªä¿ç•™ä¸­è‹±æ–‡å’Œæ•°å­—
                if (searchText.length > 2) {
                    for (let i = 0; i < markdownLines.length; i++) {
                        const simpleLine = markdownLines[i].replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g, '');
                        if (simpleLine.includes(searchText)) {
                            targetLine = i;
                            break;
                        }
                    }
                }
            }
            
            if (targetLine !== -1) {
                // è®¡ç®—å…‰æ ‡ä½ç½®
                const beforeLines = markdownLines.slice(0, targetLine).join('\n');
                const cursorPosition = beforeLines.length + (targetLine > 0 ? 1 : 0);
                
                // è®¾ç½®å…‰æ ‡ä½ç½®å¹¶èšç„¦
                markdownInput.focus();
                markdownInput.setSelectionRange(cursorPosition, cursorPosition);
                
                // ä½¿ç”¨æ›´ç²¾ç¡®çš„æ»šåŠ¨æ–¹æ³•
                scrollToLine(targetLine);
                
                // é«˜äº®å½“å‰è¡Œ
                highlightCurrentLine(targetLine);
            }
        }
        
        // ç²¾ç¡®æ»šåŠ¨åˆ°æŒ‡å®šè¡Œ
        function scrollToLine(lineNumber) {
            // åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„æµ‹é‡å…ƒç´ 
            const tempDiv = document.createElement('div');
            tempDiv.style.position = 'absolute';
            tempDiv.style.visibility = 'hidden';
            tempDiv.style.whiteSpace = 'pre';
            tempDiv.style.font = window.getComputedStyle(markdownInput).font;
            tempDiv.style.fontSize = window.getComputedStyle(markdownInput).fontSize;
            tempDiv.style.lineHeight = window.getComputedStyle(markdownInput).lineHeight;
            tempDiv.style.fontFamily = window.getComputedStyle(markdownInput).fontFamily;
            document.body.appendChild(tempDiv);
            
            // è®¡ç®—åˆ°ç›®æ ‡è¡Œçš„å®é™…åƒç´ é«˜åº¦
            const lines = markdownInput.value.split('\n');
            const textBeforeTarget = lines.slice(0, lineNumber).join('\n');
            tempDiv.textContent = textBeforeTarget;
            
            const actualHeight = tempDiv.offsetHeight;
            document.body.removeChild(tempDiv);
            
            // æ»šåŠ¨åˆ°ç›®æ ‡ä½ç½®ï¼ˆå±…ä¸­æ˜¾ç¤ºï¼‰
            const scrollTop = actualHeight - markdownInput.clientHeight / 2;
            markdownInput.scrollTop = Math.max(0, scrollTop);
        }

        // é«˜äº®å½“å‰è¡Œï¼ˆä¸´æ—¶æ•ˆæœï¼‰
        function highlightCurrentLine(lineNumber) {
            // åˆ›å»ºä¸´æ—¶é«˜äº®æ•ˆæœ
            const lines = markdownInput.value.split('\n');
            const beforeText = lines.slice(0, lineNumber).join('\n');
            const currentLine = lines[lineNumber];
            const afterText = lines.slice(lineNumber + 1).join('\n');
            
            // ä¸´æ—¶æ·»åŠ èƒŒæ™¯è‰²æç¤ºï¼ˆé€šè¿‡é€‰ä¸­æ–‡æœ¬å®ç°ï¼‰
            const startPos = beforeText.length + (lineNumber > 0 ? 1 : 0);
            const endPos = startPos + currentLine.length;
            
            setTimeout(() => {
                markdownInput.setSelectionRange(startPos, endPos);
                setTimeout(() => {
                    markdownInput.setSelectionRange(startPos, startPos);
                }, 800);
            }, 100);
        }

        function copyToClipboard() {
            const htmlContent = `<div class="wechat-content">${previewContent.innerHTML}</div>`;
            
            // åˆ›å»ºä¸´æ—¶å…ƒç´ 
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlContent;
            document.body.appendChild(tempDiv);
            
            // é€‰æ‹©å†…å®¹
            const range = document.createRange();
            range.selectNodeContents(tempDiv);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            
            try {
                document.execCommand('copy');
                alert('HTMLä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼å¯ä»¥ç›´æ¥ç²˜è´´åˆ°å¾®ä¿¡å…¬ä¼—å·ç¼–è¾‘å™¨ä¸­ã€‚');
            } catch (err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©å†…å®¹å¤åˆ¶ã€‚');
            }
            
            // æ¸…ç†
            document.body.removeChild(tempDiv);
            selection.removeAllRanges();
        }

        // ç›‘å¬è¾“å…¥å˜åŒ–
        markdownInput.addEventListener('input', updatePreview);
        
        // åˆå§‹åŒ–é¢„è§ˆ
        updatePreview();

        // å¸®åŠ©å¼¹çª—åŠŸèƒ½
        function showHelp() {
            document.getElementById('helpModal').style.display = 'block';
        }

        function hideHelp() {
            document.getElementById('helpModal').style.display = 'none';
        }

        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        document.getElementById('helpModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideHelp();
            }
        });

        // ESCé”®å…³é—­å¼¹çª—
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                hideHelp();
            }
        });

        // æ–‡ç« ç®¡ç†åŠŸèƒ½
        let currentArticleId = null;
        let articles = JSON.parse(localStorage.getItem('wechat-articles') || '{}');

        // ç”Ÿæˆæ–‡ç« ID
        function generateId() {
            return 'article_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        // ä¿å­˜æ–‡ç« 
        function saveArticle() {
            const title = document.getElementById('articleTitle').value.trim() || 'æœªå‘½åæ–‡ç« ';
            const content = markdownInput.value;
            
            if (!currentArticleId) {
                currentArticleId = generateId();
            }
            
            articles[currentArticleId] = {
                id: currentArticleId,
                title: title,
                content: content,
                updateTime: new Date().toLocaleString(),
                preview: content.substring(0, 50).replace(/[#*>-]/g, '').trim() + '...'
            };
            
            localStorage.setItem('wechat-articles', JSON.stringify(articles));
            updateHistoryList();
            
            // æ˜¾ç¤ºä¿å­˜æˆåŠŸæç¤º
            const saveBtn = document.querySelector('.save-btn');
            const originalText = saveBtn.textContent;
            saveBtn.textContent = 'å·²ä¿å­˜';
            saveBtn.style.background = '#28a745';
            setTimeout(() => {
                saveBtn.textContent = originalText;
                saveBtn.style.background = '#17a2b8';
            }, 1000);
        }

        // æ–°å»ºæ–‡ç« 
        function newArticle() {
            currentArticleId = null;
            document.getElementById('articleTitle').value = '';
            markdownInput.value = '';
            updatePreview();
            updateHistoryList();
            hideHistory();
        }

        // åŠ è½½æ–‡ç« 
        function loadArticle(articleId) {
            const article = articles[articleId];
            if (article) {
                currentArticleId = articleId;
                document.getElementById('articleTitle').value = article.title;
                markdownInput.value = article.content;
                updatePreview();
                updateHistoryList();
            }
            hideHistory();
        }

        // åˆ é™¤æ–‡ç« 
        function deleteArticle(articleId, event) {
            event.stopPropagation();
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ')) {
                delete articles[articleId];
                localStorage.setItem('wechat-articles', JSON.stringify(articles));
                if (currentArticleId === articleId) {
                    newArticle();
                }
                updateHistoryList();
            }
        }

        // æ›´æ–°å†å²è®°å½•åˆ—è¡¨
        function updateHistoryList() {
            const historyList = document.getElementById('historyList');
            const articleArray = Object.values(articles).sort((a, b) => new Date(b.updateTime) - new Date(a.updateTime));
            
            historyList.innerHTML = articleArray.map(article => `
                <div class="history-item ${article.id === currentArticleId ? 'active' : ''}" onclick="loadArticle('${article.id}')">
                    <div class="history-title">
                        ${article.title}
                        <button class="delete-btn" onclick="deleteArticle('${article.id}', event)" title="åˆ é™¤">Ã—</button>
                    </div>
                    <div class="history-time">${article.updateTime}</div>
                    <div class="history-preview">${article.preview}</div>
                </div>
            `).join('');
        }

        // æ˜¾ç¤ºå†å²è®°å½•
        function showHistory() {
            document.getElementById('historySidebar').classList.add('show');
        }

        // éšè—å†å²è®°å½•
        function hideHistory() {
            setTimeout(() => {
                document.getElementById('historySidebar').classList.remove('show');
            }, 300);
        }

        // åˆå§‹åŒ–é»˜è®¤æ–‡ç« 
        function initDefaultArticle() {
            if (Object.keys(articles).length === 0) {
                // å¦‚æœæ²¡æœ‰ä¿å­˜çš„æ–‡ç« ï¼Œåˆ›å»ºé»˜è®¤çš„æ¸”æ¨µé—®é“æ–‡ç« 
                const defaultId = generateId();
                articles[defaultId] = {
                    id: defaultId,
                    title: 'æ¸”æ¨µé—®é“',
                    content: markdownInput.value,
                    updateTime: new Date().toLocaleString(),
                    preview: 'ä¸€æ—¥ï¼Œä¸€æ¨µå¤«åœ¨å±±é—´ç æŸ´ï¼Œå¶é‡ä¸€æ¸”å¤«åœ¨æ±Ÿè¾¹å‚é’“...'
                };
                currentArticleId = defaultId;
                localStorage.setItem('wechat-articles', JSON.stringify(articles));
            } else {
                // å¦‚æœæœ‰ä¿å­˜çš„æ–‡ç« ï¼ŒåŠ è½½æœ€æ–°çš„ä¸€ç¯‡
                const latestArticle = Object.values(articles).sort((a, b) => new Date(b.updateTime) - new Date(a.updateTime))[0];
                if (latestArticle) {
                    loadArticle(latestArticle.id);
                }
            }
            updateHistoryList();
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', function() {
            initDefaultArticle();
        });

        // è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
        let autoSaveTimer;
        markdownInput.addEventListener('input', function() {
            clearTimeout(autoSaveTimer);
            autoSaveTimer = setTimeout(() => {
                if (currentArticleId && markdownInput.value.trim()) {
                    saveArticle();
                }
            }, 5000); // 5ç§’åè‡ªåŠ¨ä¿å­˜
        });
    </script>
</body>
</html>
